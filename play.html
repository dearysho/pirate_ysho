<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>play</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/play.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/plugins/animation.gsap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/plugins/debug.addIndicators.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/ScrollMagic.min.js"></script>
	<script src="js/p5.js" type="text/javascript"></script>
	<script src="js/p5.play.js" type="text/javascript"></script>
	<script src="js/sketch.js" type="text/javascript"></script>
	<script src="js/sketch.js" type="text/javascript"></script>
	<script src="js/TweenMax.min.js"></script>
    <script src="js/ScrollMagic.min.js"></script>
    <script src="js/debug.addIndicators.min.js"></script>
    <script src="js/animation.gsap.min.js"></script>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/ScrollToPlugin.js"></script>
</head>
<body>
	<div id="choose">
		<div id="playTitle">
	        <h1 class="titlePri">海賊試煉場</h1>
	    </div>
		
		<div id="playTitleSec">
			<div class="s1">
				<img class="titFrame" src="image/play/titFrame.png" alt="frame">
				<h2 class="titleSec">海賊試煉</h2>
				<p class="textM introP">
				通過海賊試煉,獲得經驗值與金錢!<br>
				試煉分初級、中級、高級<br>
				要注意等級數必須符合才能挑戰!
				</p>
			</div>
			<div class="s2">
				<img class="titFrame" src="image/play/titFrame.png" alt="frame">
				<h2 class="titleSec">啟航尋寶</h2>
				<p class="textM introP">
				在地圖上尋找神秘的寶箱,<br>
				解鎖寶箱,得到寶箱裡面的禮物<br>
				請注意每開一次寶箱會減少一點體力值
				</p>
			</div>
		</div>

		<div id="gameOrGps">
			<div id="trigger_01"></div>
			<div id="gameArea">
				<div id="element1" class="ele">
					<div class="black"></div>
					<video autobuffer autoloop loop autoplay="autoplay" class="myVideo">
						<source src="image/play/video.mp4">
					</video>
					<div class="blueArea">
						<p>通關獎勵</p>
						<p>金幣 100枚<br>經驗值 50點<br>消耗一點體力點</p>
					</div>
				</div>
				<div id="element2" class="ele">
					<div class="black"></div>
					<video autobuffer autoloop loop autoplay="autoplay" class="myVideo">
						<source src="image/play/video.mp4">
					</video>
					<div class="blueArea">
						<p>通關獎勵</p>
						<p>金幣 200枚<br>經驗值 70點<br>消耗一點體力點</p>
					</div>
				</div>
				<div id="element3" class="ele">
					<div class="black"></div>
					<video autobuffer autoloop loop autoplay="autoplay" class="myVideo">
						<source src="image/play/video.mp4">
					</video>
					<div class="blueArea">
						<p>通關獎勵</p>
						<p>金幣 300枚<br>經驗值 100點<br>消耗一點體力點</p>
					</div>
				</div>
				<img src="image/play/chanlenge1.png" alt="change" id="eleImg1">
				<img src="image/play/chanlenge2.png" alt="change" id="eleImg2">
				<img src="image/play/chanlenge3.png" alt="change" id="eleImg3">
			</div>
			<div id="gpsArea">
				<img src="image/play/map.png" alt="map" id="myMap">
				<div id="blackMap"></div>
			</div>
		</div>
	</div>
	
	<div id="game">
		<div id="trigger_02"></div>
		<div id="gameTitle">
			<img class="titFrame" src="image/play/titFrame.png" alt="frame">
			<h2 class="titleSec">海賊試煉</h2>
		</div>
		<div id="playSpark"></div>
		<div id="playArea">
			<img src="image/play/boat.png" alt="boat" id="boat">
			<div id="blueAppear"></div>
			<span id="prev">&larr;上一關</span>
			<span id="next">下一關&rarr;</span>
			<div id="playShow">
				<div class="infoImg"></div>
				<div class="infoImgDesc">
					<p class="textS"><span>金幣: </span>利用寶箱蒐集金幣,一旦被寶箱碰到金幣會蒐集到箱子裡</p>
				</div>
				<div class="infoImg"></div>
				<div class="infoImgDesc">
					<p class="textS"><span>海軍: </span>一旦被海軍碰到將會被吃掉</p>
				</div>
				<div class="infoImg"></div>
				<div class="infoImgDesc">
					<p class="textS"><span>礁岩: </span>你的船不能夠穿越這些礁岩</p>
				</div>
				<div class="infoImg"></div>
				<div class="infoImgDesc">
					<p class="textS"><span>海賊寶箱: </span>能夠蒐集金幣,當你把所有的金幣都蒐集完了以後，就破關囉。要注意在越短時間內破關,你的排名越高!</p>
				</div>
				
				
			</div>
			<div id="playnotice">
				<p>遊戲說明: 避開海軍潛艇的追擊,蒐集完所有金幣!</p>
			</div>
			<div class="button_border">
				<div class="border_in">
					<span class="icon_movie">
					</span>
				</div>
				<div class="border_out">
					<svg viewBox="0 0 88 88">
						<path class="border" d="M39.2,86C19.7,83.8,4.2,68.3,2,48.8"></path>
						<path class="border" d="M86,48.8c-2.2,19.5-17.7,35-37.2,37.2"></path>
						<path class="border" d="M48.8,2c19.5,2.2,35,17.7,37.2,37.2"></path>
						<path class="border" d="M2,39.2C4.2,19.7,19.7,4.2,39.2,2"></path>
					</svg>
				</div>
			</div>
		</div>
	</div>
	<div id="rank">
		<div id="rankTitle">
			<img class="titFrame" src="image/play/titFrame.png" alt="frame">
			<h2 class="titleSec">懸賞排行</h2>
			<p>以最快的速度通過海賊試煉,進入懸賞排行成為大家的話題焦點吧</p>
		</div>
		<div id="rankArea">
			<div id="rankList">
				<div id="rankListBox1">
					<span id="gobefore">&larr;中階</span>
					<span id="gonext">中階&rarr;</span>
					<p id="rankListTitle">初階試煉排行</p>
					<p id="rankListColName">
						<span>名次</span>
						<span>ID</span>
						<span>通關秒數</span>
					</p>
				</div>
				<div id="rankListBox2">
					<div id="rankList1">
						<div class="list1 playerList spark">
							<span>1</span>
							<span>林以騰</span>
							<span>34.81秒</span>
						</div>
						<div class="list2 playerList">
							<span>2</span>
							<span>貝多芬</span>
							<span>34.81秒</span>
						</div>
						<div class="list3 playerList">
							<span>3</span>
							<span>拿破崙</span>
							<span>34.81秒</span>
						</div>
						<div class="list4 playerList">
							<span>4</span>
							<span>織田信asd</span>
							<span>34.81秒</span>
						</div>
						<div class="list5 playerList">
							<span>5</span>
							<span>德川家</span>
							<span>34.81秒</span>
						</div>
						<div class="list6 playerList">
							<span>6</span>
							<span>宮本武</span>
							<span>34.81秒</span>
						</div>
						<div class="list7 playerList">
							<span>7</span>
							<span>佐佐木</span>
							<span>34.81秒</span>
						</div>
						<div class="list8 playerList">
							<span>8</span>
							<span>武田勝</span>
							<span>34.81秒</span>
						</div>
						<div class="list9 playerList">
							<span>9</span>
							<span>小早川</span>
							<span>34.81秒</span>
						</div>
						<div class="list10 playerList">
							<span>10</span>
							<span>蘭陵王</span>
							<span>34.81秒</span>
						</div>
					</div>
				</div>
			</div>
			<div id="rankPaper">
				<div id="paperFrame">
					<div class="rank0 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">林以騰</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank1 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">貝多芬</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank2 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">拿破崙</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank3 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">織田信長</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank4 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">德川家康</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank5 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">宮本武藏</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank6 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">佐佐木</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank7 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">武田勝賴</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank8 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">小早川秀秋</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
					<div class="rank9 rankFrame">
						<img src="image/play/rankPaper.png" alt="frame">
						<img src="image/play/myBoat.png" alt="myBoat" class="myBoat">
						<span class="myName">蘭陵王</span>
						<span class="myGrade">初階試煉34.81秒</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="js/TweenMaxPlay.js"></script>
	<script src="js/playRank.js"></script>
	<script>
		var rwd=0;//判斷如果為手機螢幕不執行動畫
		var animation_04;
		var animation_08;
		var section_04;
		var gameStartTimer;
		var controller = new ScrollMagic.Controller();
		var flag = 0;
		var w = $('#playTitleSec').width();
		if(w==375)rwd=1;
		if(rwd==0){
			$(document).ready(function(){
			
			console.log(w);
			//手機螢幕


			// 選擇寶藏遊戲時黑幕消失
			$('#gpsArea').mouseover(function(){
				$('#blackMap').css('opacity','0');
			});
			$('#gpsArea').mouseleave(function(){
				$('#blackMap').css('opacity','.6');
			});
			// 滑到第二屏時藍色布幕動畫
			animation_04 = TweenMax.to(`#blueAppear`,10, {
						top:0,
			    		left:0,
			    		opacity:1,
					});
			section_04 = new ScrollMagic.Scene({
			        triggerElement: "#trigger_02",
			        duration: 300,
			        reverse:false,
			    }).setTween(animation_04)
			    .addIndicators()
			    .addTo(controller);
			// 滑到第二屏時小船動畫
			animation_08 = TweenMax.to(`#boat`,10, {
			    		left:120,
					});
			section_04 = new ScrollMagic.Scene({
			        triggerElement: "#trigger_02",
			        duration: 300,
			        reverse:false,
			    }).setTween(animation_08)
			    .addIndicators()
			    .addTo(controller);
				
			// gps第一屏到第二屏的動畫變化
			// next
			$('#next').click(function(){
				if(flag==1||flag==0){
					$("#eleImg2").css('display','block');
					$("#eleImg1").css('display','none');
					$("#element2 .black").css('display','none');
					$("#element1 .black").css('display','block');
					$('#prev').css('display','block');
					TweenMax.to(`#element1`,1, {
		    		y: 0,
		    		x: 0,
		    		webkitClipPath:'polygon(50px 0, 0 250px, 50px 500px, 150px 500px, 100px 250px, 150px 0)',
					});
					TweenMax.to(`#eleImg1`,1, {
			    		y: 0,
			    		x: 0,
					});
					TweenMax.to(`#element2`,1, {
		    		y: 826,
		    		x: -75,
		    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
					});
					TweenMax.to(`#eleImg2`,1, {
			    		y: 470,
			    		x: -77,
					});
					flag=2;
				}else if(flag==2){
					$("#eleImg3").css('display','block');
					$("#eleImg2").css('display','none');
					$("#element3 .black").css('display','none');
					$("#element2 .black").css('display','block');
					$('#next').css('display','none');
					TweenMax.to(`#element2`,1, {
			    		y: 0,
			    		x: 0,
			    		webkitClipPath:'polygon(50px 0, 0 250px, 50px 500px, 150px 500px, 100px 250px, 150px 0)',
					});
					TweenMax.to(`#eleImg2`,1, {
			    		y: 0,
			    		x: 0,
					});
					TweenMax.to(`#eleImg3`,1, {
			    		y: 470,
			    		x: -181,
					});
					TweenMax.to(`#element3`,1, {
			    		y: 826,
			    		x: -180,
			    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
					});
					flag=3;
				}
			});
			$('#prev').click(function(){
				if(flag==3){
					$("#eleImg2").css('display','block');
					$("#eleImg3").css('display','none');
					$("#element3 .black").css('display','block');
					$("#element2 .black").css('display','none');
					$('#next').css('display','block');
					TweenMax.to(`#element3`,1, {
			    		y: 0,
			    		x: 0,
			    		webkitClipPath:'polygon(300px 0, 350px 250px, 300px 500px, 400px 500px, 450px 250px, 400px 0)',
					});
					TweenMax.to(`#eleImg3`,1, {
			    		y: 0,
			    		x: 0,
					});
					TweenMax.to(`#eleImg2`,1, {
			    		y: 470,
		    			x: -77,
					});
					TweenMax.to(`#element2`,1, {
			    		y: 826,
		    			x: -75,
			    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
					});
					flag=2;
				}else if(flag==2){
					$("#eleImg1").css('display','block');
					$("#eleImg2").css('display','none');
					$("#element1 .black").css('display','none');
					$("#element2 .black").css('display','block');
					$('#prev').css('display','none');
					flag=1;
					TweenMax.to(`#element2`,1, {
			    		y: 0,
			    		x: 0,
			    		webkitClipPath:'polygon(300px 0, 350px 250px, 300px 500px, 400px 500px, 450px 250px, 400px 0)',
					});
					TweenMax.to(`#eleImg2`,1, {
			    		y: 0,
			    		x: 0,
					});
					TweenMax.to(`#eleImg1`,1, {
			    		y: 470,
			    		x: 28,
					});
					TweenMax.to(`#element1`,1, {
			    		y: 826,
			    		x: 30,
			    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
					});
				}
			});
			// click
			$('#element1').click(function(){
				flag = 1;
				TweenLite.to(window, 1, {scrollTo:{y:"#game", offsetY:70, autoKill:false}});
				TweenMax.to(`#element1`,1, {
		    		y: 826,
		    		x: 30,
		    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
				});
				TweenMax.to(`#eleImg1`,1, {
		    		y: 470,
		    		x: 28,
				});
				$('#prev').css('display','none');
			});
			$('#element2').click(function(){
				flag = 2;
				TweenLite.to(window, 1, {scrollTo:{y:"#game", offsetY:70, autoKill:false}});
				TweenMax.to(`#element2`,1, {
		    		y: 826,
		    		x: -75,
		    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
				});
				TweenMax.to(`#eleImg2`,1, {
		    		y: 470,
		    		x: -77,
				});
				$('#prev').css('display','block');
			});
			$('#element3').click(function(){
				flag = 3;
				TweenLite.to(window, 1, {scrollTo:{y:"#game", offsetY:70, autoKill:false}});
				TweenMax.to(`#element3`,1, {
		    		y: 826,
		    		x: -180,
		    		webkitClipPath:'polygon(0 0, 0 250px, 0px 500px, 450px 500px, 450px 250px, 450px 0)',
				});
				TweenMax.to(`#eleImg3`,1, {
		    		y: 470,
		    		x: -181,
				});
				$('#prev').css('display','block');
				$('#next').css('display','block');
			});
			// mouseover
			$('#element1').mouseover(function(){//初階
				// 初中高試煉frame變形
				$("#element1").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 400px 500px, 450px 250px, 400px 0)');
				$("#element2").css('clipPath','polygon(300px 0, 350px 250px, 300px 500px, 400px 500px, 450px 250px, 400px 0)');
				$("#element3").css('clipPath','polygon(300px 0, 350px 250px, 300px 500px, 400px 500px, 450px 250px, 400px 0)');
				// 初中高試煉slogan出現與消失
				$("#eleImg1").css('display','block');
				$("#eleImg2").css('display','none');
				$("#eleImg3").css('display','none');
				// 初中高試煉black screen出現與消失 
				$("#element1 .black").css('display','none');
				$("#element2 .black").css('display','block');
				$("#element3 .black").css('display','block');
			    // 取消其他試煉frame移到第二屏的動畫
			    TweenMax.killTweensOf(`#element2`);
			    TweenMax.killTweensOf(`#element3`);
			});
			$('#element2').mouseover(function(){//中階
				// 初中高試煉frame變形
				$("#element1").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 150px 500px, 100px 250px, 150px 0)');
				$("#element2").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 400px 500px, 450px 250px, 400px 0)');
				$("#element3").css('clipPath','polygon(300px 0, 350px 250px, 300px 500px, 400px 500px, 450px 250px, 400px 0)');
				// 初中高試煉slogan出現與消失
				$("#eleImg1").css('display','none');
				$("#eleImg2").css('display','block');
				$("#eleImg3").css('display','none');
				// 初中高試煉black screen出現與消失 
				$("#element1 .black").css('display','block');
				$("#element2 .black").css('display','none');
				$("#element3 .black").css('display','block');
				// 初中高試煉frame移動到第二屏
			    // 取消其他試煉frame移到第二屏的動畫
			    TweenMax.killTweensOf(`#element1`);
			    TweenMax.killTweensOf(`#element3`);
			});
			$('#element3').mouseover(function(){//高階
				// 初中高試煉frame變形
				$("#element1").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 150px 500px, 100px 250px, 150px 0)');
				$("#element2").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 150px 500px, 100px 250px, 150px 0)');
				$("#element3").css('clipPath','polygon(50px 0, 0 250px, 50px 500px, 400px 500px, 450px 250px, 400px 0)');
				// 初中高試煉slogan出現與消失
				$("#eleImg1").css('display','none');
				$("#eleImg2").css('display','none');
				$("#eleImg3").css('display','block');
				// 初中高試煉black screen出現與消失 
				$("#element1 .black").css('display','block');
				$("#element2 .black").css('display','block');
				$("#element3 .black").css('display','none');
				// 初中高試煉frame移動到第二屏
			    // 取消其他試煉frame移到第二屏的動畫
			    TweenMax.killTweensOf(`#element1`);
			    TweenMax.killTweensOf(`#element2`);
			});
			// playBtn
			$('.button_border').click(function(){
				$('#playSpark').css('clipPath','circle(1900px)');
				gameStartTimer = setInterval(play,1000);
			});
			function play(){
				clearInterval(gameStartTimer);
				$('.button_border').css('display','none');
				$('#defaultCanvas0').css('display','block');
			}

			
		});
		}
		
		
		


	</script>
</body>
</html>